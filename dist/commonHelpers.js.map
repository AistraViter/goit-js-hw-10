{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\r\nimport 'flatpickr/dist/flatpickr.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nconst datetimePicker = document.querySelector('#datetime-picker');\r\nconst setTimerBtn = document.querySelector('.set-timer-btn');\r\nsetTimerBtn.disabled = true;\r\n\r\nlet dataDays = document.querySelector('[data-days]');\r\nlet dataHours = document.querySelector('[data-hours]');\r\nlet dataMinutes = document.querySelector('[data-minutes]');\r\nlet dataSeconds = document.querySelector('[data-seconds]');\r\n\r\nlet userSelectedDate; // Змінна для збереження вибраної дати\r\nlet endTime;\r\n\r\nconst options = {\r\n  enableTime: true,\r\n  time_24hr: true,\r\n  defaultDate: new Date(),\r\n  minuteIncrement: 1,\r\n  onClose(selectedDates) {\r\n    userSelectedDate = selectedDates[0]; // Зберегти вибрану дату в змінну\r\n    let startTime = Date.now(); // Отримати поточну дату в форматі числа\r\n    endTime = userSelectedDate.getTime();\r\n    if (endTime - startTime < 0) {\r\n      iziToast.show({\r\n        iconUrl: \"./img/cross.svg\",\r\n        iconColor: 'grey',\r\n        message: 'Please choose a date in the future',\r\n        messageColor: 'white',\r\n        messageSize: '18',\r\n        backgroundColor: 'red',\r\n        position:\"topRight\",\r\n        class: 'custom-toast' ,\r\n        icon: 'iziToast-icon'\r\n      });\r\n\r\n      setTimerBtn.disabled = true;\r\n    } else {\r\n      setTimerBtn.disabled = false;\r\n    }\r\n    setTimerBtn.addEventListener('click', () => {\r\n      setTimerBtn.disabled = true;\r\n      datetimePicker.disabled = true;\r\n      const intervalId = setInterval(() => {\r\n        let currentTime = Date.now();\r\n        let ms = endTime - currentTime;\r\n\r\n        if (ms <= 0) {\r\n          clearInterval(intervalId);\r\n          ms = 0;\r\n          setTimerBtn.disabled = false;\r\n          datetimePicker.disabled = false;\r\n        }\r\n\r\n        const remainingTime = convertMs(ms); // Отримати залишковий час\r\n        fillRemaingTime(remainingTime); // Заповнити залишковий час\r\n      }, 1000);\r\n    });\r\n  },\r\n};\r\n\r\nflatpickr(datetimePicker, options);\r\n\r\nfunction convertMs(ms) {\r\n  // Number of milliseconds per unit of time\r\n  const second = 1000;\r\n  const minute = second * 60;\r\n  const hour = minute * 60;\r\n  const day = hour * 24;\r\n\r\n  // Remaining days\r\n  const days = Math.floor(ms / day);\r\n  // Remaining hours\r\n  const hours = Math.floor((ms % day) / hour);\r\n  // Remaining minutes\r\n  const minutes = Math.floor(((ms % day) % hour) / minute);\r\n  // Remaining seconds\r\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\r\n\r\n  return { days, hours, minutes, seconds };\r\n}\r\n\r\nfunction fillRemaingTime({ days, hours, minutes, seconds }) {\r\n  dataDays.textContent = days.toString().padStart(2, '0');\r\n  dataHours.textContent = hours.toString().padStart(2, '0');\r\n  dataMinutes.textContent = minutes.toString().padStart(2, '0');\r\n  dataSeconds.textContent = seconds.toString().padStart(2, '0');\r\n}\r\n"],"names":["datetimePicker","setTimerBtn","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","endTime","options","selectedDates","startTime","iziToast","intervalId","currentTime","ms","remainingTime","convertMs","fillRemaingTime","flatpickr","days","hours","minutes","seconds"],"mappings":"0IAKA,MAAMA,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAc,SAAS,cAAc,gBAAgB,EAC3DA,EAAY,SAAW,GAEvB,IAAIC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAErDC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAClC,IAAIC,EAAY,KAAK,MACrBH,EAAUD,EAAiB,UACvBC,EAAUG,EAAY,GACxBC,EAAS,KAAK,CACZ,QAAS,kBACT,UAAW,OACX,QAAS,qCACT,aAAc,QACd,YAAa,KACb,gBAAiB,MACjB,SAAS,WACT,MAAO,eACP,KAAM,eACd,CAAO,EAEDV,EAAY,SAAW,IAEvBA,EAAY,SAAW,GAEzBA,EAAY,iBAAiB,QAAS,IAAM,CAC1CA,EAAY,SAAW,GACvBD,EAAe,SAAW,GAC1B,MAAMY,EAAa,YAAY,IAAM,CACnC,IAAIC,EAAc,KAAK,MACnBC,EAAKP,EAAUM,EAEfC,GAAM,IACR,cAAcF,CAAU,EACxBE,EAAK,EACLb,EAAY,SAAW,GACvBD,EAAe,SAAW,IAG5B,MAAMe,EAAgBC,EAAUF,CAAE,EAClCG,EAAgBF,CAAa,CAC9B,EAAE,GAAI,CACb,CAAK,CACF,CACH,EAEAG,EAAUlB,EAAgBQ,CAAO,EAEjC,SAASQ,EAAUF,EAAI,CAQrB,MAAMK,EAAO,KAAK,MAAML,EAAK,KAAG,EAE1BM,EAAQ,KAAK,MAAON,EAAK,MAAO,IAAI,EAEpCO,EAAU,KAAK,MAAQP,EAAK,MAAO,KAAQ,GAAM,EAEjDQ,EAAU,KAAK,MAASR,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAgB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DpB,EAAS,YAAciB,EAAK,SAAU,EAAC,SAAS,EAAG,GAAG,EACtDhB,EAAU,YAAciB,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,EACxDhB,EAAY,YAAciB,EAAQ,SAAU,EAAC,SAAS,EAAG,GAAG,EAC5DhB,EAAY,YAAciB,EAAQ,SAAU,EAAC,SAAS,EAAG,GAAG,CAC9D"}